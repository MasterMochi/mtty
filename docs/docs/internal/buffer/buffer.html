<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge"><!-- IE互換モード回避 -->
        <meta name="author" content="Mochi">
        <meta name="viewport" content="width=device-width,initial-scale=1"><!-- レスポンシブデザイン -->
        <meta name="description" content="mttyは、MochiKernel上で動作するttyサーバです。">
        <meta name="format-detection" content="email=no,telephone=no,address=no">
        <meta property="og:url" content="https://MasterMochi.github.io/mtty/">
        <meta property="og:title" content="MLib">
        <meta property="og:type" content="website">
        <meta property="og:description" content="mttyは、MochiKernel上で動作するttyサーバです。">
        <!-- <meta property="og:image" content=""> -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@master_mochi">
        <!-- <meta name="msapplication-TileImage" content="" --><!-- MSWIN8～ピン留め対応 -->
        <meta name="msapplication-TitleColor" content="#424242"><!-- MSWIN8～ピン留め対応 -->
        <link rel="stylesheet" href="../../../style.css">
        <link rel="canonical" href="https://MasterMochi.github.io/mtty/">
        <!-- <link rel="icon" href="" sizes="16x16" type="image/png"> -->
        <!-- <link rel="icon" href="" sizes="32x32" type="image/png"> -->
        <!-- <link rel="icon" href="" sizes="48x48" type="image/png"> -->
        <!-- <link rel="icon" href="" sizes="62x62" type="image/png"> -->
        <link href="https://fonts.googleapis.com/css?family=Cutive+Mono" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Sawarabi+Mincho" rel="stylesheet">
        <link href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" rel="stylesheet" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
        <title>mtty - 内部仕様 - バッファ管理</title>
    </head>
    <body>
        <a name="top"></a>
        <div id="header">
            <div id="menu">
                <a href="../../../index.html"><div id="logo">MLib</div></a>
                <a href="../../index.html"><div>Docs</div></a>
            </div>
        </div>
        <div id="crumb">
            <ol itemscope itemtype="http://schema.org/BreadcrumbList">
                <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
                    <a itemprop="item" href="../../../index.html"><span itemprop="name">Home</span></a>
                    <meta itemprop="position" content="1">
                </li>
                <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
                    <a itemprop="item" href="../../index.html"><span itemprop="name">Docs</span></a>
                    <meta itemprop="position" content="2">
                </li>
                <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
                    <a itemprop="item" href="./buffer.html"><span itemprop="name">内部仕様-バッファ管理</span></a>
                    <meta itemprop="position" content="3">
                </li>
            </ol>
        </div>
        <div id="content">
            <div>
                <h1>目次</h1>
                <ul type="disc">
                    <li><a href="#abstruct">概要</a></li>
                    <li>機能
                        <ul type="disc">
                            <li><a href="#init">初期化</a></li>
                            <li><a href="#readbuffer">読込み用バッファ管理</a>
                                <ul type="disc">
                                    <li><a href="#readbuffer-push">データ追加</a></li>
                                    <li><a href="#readbuffer-pop">データ取出し</a></li>
                                </ul>
                            </li>
                            <li><a href="#writebuffer">書込み用バッファ管理</a>
                                <ul type="disc">
                                    <li><a href="#writebuffer-push">データ追加</a></li>
                                    <li><a href="#writebuffer-pop">データ取出し</a></li>
                                    <li><a href="#writebuffer-check">データ有無判定</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>グローバル関数
                        <ul type="disc">
                            <li><a href="#func-init">BufferInit()</a></li>
                            <li><a href="#func-readbuffer-push">BufferPushForRead()</a></li>
                            <li><a href="#func-writebuffer-push">BufferPushForWrite()</a></li>
                            <li><a href="#func-readbuffer-pop">BufferPopForRead()</a></li>
                            <li><a href="#func-writebuffer-pop">BufferPopForWrite()</a></li>
                            <li><a href="#func-writebuffer-check">BufferCheckWrite()</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div>
                <h1><a name="abstruct">概要</a></h1>
                <p>バッファ管理では、デバイスとttyファイルのデータやり取りの為のバッファを管理する。</p>
                <p>管理するバッファの一覧を以下に示す。</td>
                <br>
                <div class="center">管理バッファ一覧</div>
                <table>
                    <tr>
                        <td class="title">#</td>
                        <td class="title">デバイス</td>
                        <td class="title">用途</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td rowspan="2">/serial1</td>
                        <td>読込み用</td>
                        <td>シリアルポート1から読み取ったデータをバッファリングする。</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>書込み用</td>
                        <td>シリアルポート1のttyファイルに書き込まれたデータをバッファリングする。</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td rowspan="2">/serial2</td>
                        <td>読込み用</td>
                        <td>シリアルポート2から読み取ったデータをバッファリングする。</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>書込み用</td>
                        <td>シリアルポート2のttyファイルに書き込まれたデータをバッファリングする。</td>
                    </tr>
                </table>
            </div>
            <div>
                <h1><a name="init">初期化</a></h1>
                <p>初期化は、メインモジュールから起動された時に各バッファを初期化する。</p>
                <p>シーケンスを以下に示す。</p>
                <div class="center"><img src="init.png"></div>
                <br>
                <p>バッファの初期化は、各バッファ毎にMLibライブラリのMLibRingBufferInit()を用いて行う。</p>
                <br>
                <div class="center">バッファ初期化</div>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="3">MLibRingBufferInit()</td>
                    </tr>
                    <tr>
                        <td class="title">戻り値</td>
                        <td colspan="3">バッファ初期化結果を返す。</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="5">引数</td>
                        <td class="title">#</td>
                        <td class="title">設定値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title">1</td>
                        <td>(変数ポインタ)</td>
                        <td>
                            シリアルポート1読込み用バッファハンドル<br>
                            シリアルポート1書込み用バッファハンドル<br>
                            シリアルポート2読込み用バッファハンドル<br>
                            シリアルポート2書込み用バッファハンドル
                        </td>
                    </tr>
                    <tr>
                        <td class="title">2</td>
                        <td>1</td>
                        <td>エントリサイズ</td>
                    </tr>
                    <tr>
                        <td class="title">3</td>
                        <td>4096</td>
                        <td>エントリ数</td>
                    </tr>
                    <tr>
                        <td class="title">4</td>
                        <td>(変数ポインタ)</td>
                        <td>エラー要因</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="readbuffer">機能 - 読込み用バッファ管理</a></h1>
                <p>デバイスから読み込んだデータのバッファリングについて、データの追加と取出し機能を持つ。</p>
            </div>
            <div>
                <h1><a name="readbuffer-push">機能 - 読込み用バッファ管理 - データ追加</a></h1>
                <p>読込み用バッファにデータの追加をデバイス制御から要求された時に、デバイスIDからバッファのハンドルに変換し、ハンドルによってバッファにデータを追加する。</p>
                <p>シーケンスを以下に示す。</p>
                <br>
                <div class="center"><img src="readbuffer-push.png"></div>
                <br>
                <p>デバイスIDからバッファハンドルへの変換は下記対応表に従う。</p>
                <br>
                <div class="center">デバイスとバッファハンドルの対応</div>
                <table>
                    <tr>
                        <td class="title">デバイスID</td>
                        <td class="title">ハンドル</td>
                    </tr>
                    <tr>
                        <td>MTTY_DEVID_SERIAL1</td>
                        <td>シリアルポート1読込み用バッファハンドル</td>
                    </tr>
                    <tr>
                        <td>MTTY_DEVID_SERIAL2</td>
                        <td>シリアルポート2読込み用バッファハンドル</td>
                    </tr>
                </table>
                <br>
                <p>バッファへのデータ追加は、1byte毎にMLibライブラリのMLibRingBufferPush()を用いて、サイズ分繰り返し行う。</p>
                <br>
                <div class="center">バッファへのデータ追加</div>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="3">MLibRingBufferPush()</td>
                    </tr>
                    <tr>
                        <td class="title">戻り値</td>
                        <td colspan="3">処理結果が返る。失敗した場合はデータ追加を中断する。</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="4">引数</td>
                        <td class="title">#</td>
                        <td class="title">設定値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title">1</td>
                        <td>(変数ポインタ)</td>
                        <td>ハンドル</td>
                    </tr>
                    <tr>
                        <td class="title">2</td>
                        <td>(変数ポインタ)</td>
                        <td>データ</td>
                    </tr>
                    <tr>
                        <td class="title">3</td>
                        <td>(変数ポインタ)</td>
                        <td>エラー要因</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="readbuffer-pop">機能 - 読込み用バッファ管理 - データ取出し</a></h1>
                <p>読込み用バッファからデータの取り出しをtty制御から要求された時に、デバイスIDからバッファのハンドルに変換し、ハンドルによってバッファからデータを取り出す。</p>
                <p>シーケンスを以下に示す。</p>
                <br>
                <div class="center"><img src="readbuffer-pop.png"></div>
                <br>
                <p>デバイスIDとバッファハンドルの変換は、読込み用バッファ管理のデータ追加機能と同じ変換を行う。</p>
                <p>バッファからのデータ取出しは、1byte毎にMLibライブラリのMLibRingBufferPop()を用いて、サイズ分繰り返し行う。</p>
                <br>
                <div class="center">バッファからのデータ取出し</div>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="3">MLibRingBufferPop()</td>
                    </tr>
                    <tr>
                        <td class="title">戻り値</td>
                        <td colspan="3">処理結果が返る。失敗した場合はデータ取出しを中断する。</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="4">引数</td>
                        <td class="title">#</td>
                        <td class="title">設定値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title">1</td>
                        <td>(変数ポインタ)</td>
                        <td>ハンドル</td>
                    </tr>
                    <tr>
                        <td class="title">2</td>
                        <td>(変数ポインタ)</td>
                        <td>データ</td>
                    </tr>
                    <tr>
                        <td class="title">3</td>
                        <td>(変数ポインタ)</td>
                        <td>エラー要因</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="writebuffer">機能 - 書込み用バッファ管理</a></h1>
                <p>デバイスに対応するttyファイルに書き込まれたデータのバッファリングについて、データの追加と取出し機能を持つ。</p>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="writebuffer-push">機能 - 書込み用バッファ管理 - データ追加</a></h1>
                <p>書込み用バッファにデータの追加をtty制御から要求された時に、デバイスIDからバッファのハンドルに変換し、そのハンドルによってバッファにデータを追加する。</p>
                <p>シーケンスを以下に示す。</p>
                <br>
                <div class="center"><img src="writebuffer-push.png"></div>
                <br>
                <p>デバイスIDからバッファハンドルへの変換は下記対応表に従う</p>
                <br>
                <div class="center">デバイスとバッファハンドルの対応</div>
                <table>
                    <tr>
                        <td class="title">デバイスID</td>
                        <td class="title">ハンドル</td>
                    </tr>
                    <tr>
                        <td>MTTY_DEVID_SERIAL1</td>
                        <td>シリアルポート1書込み用バッファハンドル</td>
                    </tr>
                    <tr>
                        <td>MTTY_DEVID_SERIAL2</td>
                        <td>シリアルポート2書込み用バッファハンドル</td>
                    </tr>
                </table>
                <br>
                <p>バッファへのデータ追加は、1byte毎にMLibライブラリのMLibRingBufferPush()を用いて、サイズ分繰り返し行う。</p>
                <br>
                <div class="center">バッファへのデータ追加</div>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="3">MLibRingBufferPush()</td>
                    </tr>
                    <tr>
                        <td class="title">戻り値</td>
                        <td colspan="3">
                            処理結果が返る。失敗した場合はデータ追加を中断する。
                        </td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="4">引数</td>
                        <td class="title">#</td>
                        <td class="title">設定値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title">1</td>
                        <td>(変数ポインタ)</td>
                        <td>ハンドル</td>
                    </tr>
                    <tr>
                        <td class="title">2</td>
                        <td>(変数ポインタ)</td>
                        <td>データ</td>
                    </tr>
                    <tr>
                        <td class="title">3</td>
                        <td>(変数ポインタ)</td>
                        <td>エラー要因</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="writebuffer-pop">機能 - 書込み用バッファ管理 - データ取出し</a></h1>
                <p>書込み用バッファからデータの取り出しをデバイス制御から要求された時に、デバイスIDからバッファのハンドルに変換し、ハンドルによってバッファからデータを取り出す。</p>
                <p>シーケンスを以下に示す。</p>
                <br>
                <div class="center"><img src="writebuffer-pop.png"></div>
                <br>
                <p>デバイスIDとバッファハンドルの変換は、書込み用バッファ管理のデータ追加機能と同じ変換を行う。</p>
                <p>バッファからのデータ取出しは、1byte毎にMLibライブラリのMLibRingBufferPop()を用いて、サイズ分繰り返し行う。</p>
                <br>
                <div class="center">バッファからのデータ取出し</div>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="3">MLibRingBufferPop()</td>
                    </tr>
                    <tr>
                        <td class="title">戻り値</td>
                        <td colspan="3">処理結果が返る。失敗した場合はデータ取り出しを中断する。</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="4">引数</td>
                        <td class="title">#</td>
                        <td class="title">設定値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title">1</td>
                        <td>(変数ポインタ)</td>
                        <td>ハンドル</td>
                    </tr>
                    <tr>
                        <td class="title">2</td>
                        <td>(変数ポインタ)</td>
                        <td>データ</td>
                    </tr>
                    <tr>
                        <td class="title">3</td>
                        <td>(変数ポインタ)</td>
                        <td>エラー要因</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="writebuffer-check">機能 - 書込み用バッファ管理 - データ有無判定</a></h1>
                <p>書込み用バッファのデータ有無判定を要求された時に、デバイスIDからバッファのハンドルに変換し、ハンドルを用いてデータの数を参照し判定する。</p>
                <p>シーケンスを以下に示す。</p>
                <br>
                <div class="center"><img src="writebuffer-check.png"></div>
                <br>
                <p>デバイスIDとバッファハンドルの変換は、書込み用バッファ管理のデータ追加機能と同じ変換を行う。</p>
                <p>バッファに追加されているデータ数の参照は、MLibライブラリのMLibRingBufferGetNum()を用いて行う。</p>
                <br>
                <div class="center">データ数の参照</div>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="3">MLibRingBufferGetNum()</td>
                    </tr>
                    <tr>
                        <td class="title">戻り値</td>
                        <td colspan="3">データ数が返る。</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">引数</td>
                        <td class="title">#</td>
                        <td class="title">設定値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title">1</td>
                        <td>(変数ポインタ)</td>
                        <td>ハンドル</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="func-init">グローバル関数 - BufferInit()</a></h1>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td>BufferInit()</td>
                    </tr>
                    <tr>
                        <td class="title">概要</td>
                        <td>バッファ管理初期化</td>
                    </tr>
                    <tr>
                        <td class="title">説明</td>
                        <td>バッファを初期化する。</td>
                    </tr>
                    <tr>
                        <td class="title">宣言</td>
                        <td>
                            <code>
                                <pre>#include &lt;Buffer.h&gt;</pre>
                                <br>
                                <pre>extern void BufferInit( void );</pre>
                            </code>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="func-readbuffer-push">グローバル関数 - BufferPushForRead()</a></h1>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="4">BufferPushForRead()</td>
                    </tr>
                    <tr>
                        <td class="title">概要</td>
                        <td colspan="4">読込み用バッファ追加</td>
                    </tr>
                    <tr>
                        <td class="title">説明</td>
                        <td colspan="4">
                            引数idに対応する読込み用バッファにデータを追加する。<br>
                            バッファがフルとなり追加できなかったデータは破棄する。
                        </td>
                    </tr>
                    <tr>
                        <td class="title">宣言</td>
                        <td colspan="4">
                            <code>
                                <pre>#include &lt;Buffer.h&gt;</pre>
                                <br>
                                <pre>extern size_t BufferPushForRead( MttyDevId_t id,</pre>
                                <pre>                                 void        *pData,</pre>
                                <pre>                                 size_t      size    );</pre>
                            </code>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">戻り値</td>
                        <td class="title" colspan="2">値</td>
                        <td class="title" colspan="2">説明</td>
                    </tr>
                    <tr>
                        <td colspan="2">0～(引数sizeの値)</td>
                        <td colspan="2">バッファに追加したデータのサイズ</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="5">引数</td>
                        <td class="title">#</td>
                        <td class="title">引数名</td>
                        <td class="title">値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">1</td>
                        <td rowspan="2">id</td>
                        <td>MTTY_DEVID_SERIAL1</td>
                        <td>/serial1</td>
                    </tr>
                    <tr>
                        <td>MTTY_DEVID_SERIAL2</td>
                        <td>/serial2</td>
                    </tr>
                    <tr>
                        <td class="title">2</td>
                        <td>*pData</td>
                        <td>(NULLを除いた任意の値)</td>
                        <td>追加するデータへのポインタ</td>
                    </tr>
                    <tr>
                        <td class="title">3</td>
                        <td>size</td>
                        <td>(任意の値)</td>
                        <td>追加するデータのサイズ</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="func-writebuffer-push">グローバル関数 - BufferPushForWrite()</a></h1>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="4">BufferPushForWrite()</td>
                    </tr>
                    <tr>
                        <td class="title">概要</td>
                        <td colspan="4">書込み用バッファ追加</td>
                    </tr>
                    <tr>
                        <td class="title">説明</td>
                        <td colspan="4">
                            引数idに対応する書込み用バッファにデータを追加する。<br>
                            バッファがフルとなり追加できなかったデータは破棄する。
                        </td>
                    </tr>
                    <tr>
                        <td class="title">宣言</td>
                        <td colspan="4">
                            <code>
                                <pre>#include &lt;Buffer.h&gt;</pre>
                                <br>
                                <pre>extern size_t BufferPushForWrite( MttyDevId_t id,</pre>
                                <pre>                                  void        *pData,</pre>
                                <pre>                                  size_t      size    );</pre>
                            </code>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">戻り値</td>
                        <td class="title" colspan="2">値</td>
                        <td class="title" colspan="2">説明</td>
                    </tr>
                    <tr>
                        <td colspan="2">0～(引数sizeの値)</td>
                        <td colspan="2">バッファに追加したデータのサイズ</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="5">引数</td>
                        <td class="title">#</td>
                        <td class="title">引数名</td>
                        <td class="title">値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">2</td>
                        <td rowspan="2">id</td>
                        <td>MTTY_DEVID_SERIAL1</td>
                        <td>/serial1</td>
                    </tr>
                    <tr>
                        <td>MTTY_DEVID_SERIAL2</td>
                        <td>/serial2</td>
                    </tr>
                    <tr>
                        <td class="title">2</td>
                        <td>*pData</td>
                        <td>(NULLを除いた任意の値)</td>
                        <td>追加するデータへのポインタ</td>
                    </tr>
                    <tr>
                        <td class="title">3</td>
                        <td>size</td>
                        <td>(任意の値)</td>
                        <td>追加するデータのサイズ</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="func-readbuffer-pop">グローバル関数 - BufferPopForRead()</a></h1>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="4">BufferPopForRead()</td>
                    </tr>
                    <tr>
                        <td class="title">概要</td>
                        <td colspan="4">読込み用バッファ取出し</td>
                    </tr>
                    <tr>
                        <td class="title">説明</td>
                        <td colspan="4">
                            引数idに対応する読込み用バッファからデータを取り出す。<br>
                            バッファが空となりデータが取り出せなくなった場合は中断する。
                        </td>
                    </tr>
                    <tr>
                        <td class="title">宣言</td>
                        <td colspan="4">
                            <code>
                                <pre>#include &lt;Buffer.h&gt;</pre>
                                <br>
                                <pre>extern size_t BufferPopForRead( MttyDevId_t id,</pre>
                                <pre>                                void        *pData,</pre>
                                <pre>                                size_t      size    );</pre>
                            </code>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">戻り値</td>
                        <td class="title" colspan="2">値</td>
                        <td class="title" colspan="2">説明</td>
                    </tr>
                    <tr>
                        <td colspan="2">0～(引数sizeの値)</td>
                        <td colspan="2">取り出したデータのサイズ</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="5">引数</td>
                        <td class="title">#</td>
                        <td class="title">引数名</td>
                        <td class="title">値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">1</td>
                        <td rowspan="2">id</td>
                        <td>MTTY_DEVID_SERIAL1</td>
                        <td>/serial1</td>
                    </tr>
                    <tr>
                        <td>MTTY_DEVID_SERIAL2</td>
                        <td>/serial2</td>
                    </tr>
                    <tr>
                        <td class="title">2</td>
                        <td>*pData</td>
                        <td>(NULLを除いた任意の値)</td>
                        <td>取り出したデータの格納先ポインタ</td>
                    </tr>
                    <tr>
                        <td class="title">3</td>
                        <td>size</td>
                        <td>(任意の値)</td>
                        <td>取り出すデータのサイズ</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="func-writebuffer-pop">グローバル関数 - BufferPopForWrite()</a></h1>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="4">BufferPopForWrite()</td>
                    </tr>
                    <tr>
                        <td class="title">概要</td>
                        <td colspan="4">書込み用バッファ取出し</td>
                    </tr>
                    <tr>
                        <td class="title">説明</td>
                        <td colspan="4">
                            引数idに対応する書込み用バッファからデータを取り出す。<br>
                            バッファが空となりデータが取り出せなくなった場合は中断する。
                        </td>
                    </tr>
                    <tr>
                        <td class="title">宣言</td>
                        <td colspan="4">
                            <code>
                                <pre>#include &lt;Buffer.h&gt;</pre>
                                <br>
                                <pre>extern size_t BufferPopForWrite( MttyDevId_t id,</pre>
                                <pre>                                 void        *pData,</pre>
                                <pre>                                 size_t      size    );</pre>
                            </code>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">戻り値</td>
                        <td class="title" colspan="2">値</td>
                        <td class="title" colspan="2">説明</td>
                    </tr>
                    <tr>
                        <td colspan="2">0～(引数sizeの値)</td>
                        <td colspan="2">取り出したデータのサイズ</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="5">引数</td>
                        <td class="title">#</td>
                        <td class="title">引数名</td>
                        <td class="title">値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">1</td>
                        <td rowspan="2">id</td>
                        <td>MTTY_DEVID_SERIAL1</td>
                        <td>/serial1</td>
                    </tr>
                    <tr>
                        <td>MTTY_DEVID_SERIAL2</td>
                        <td>/serial2</td>
                    </tr>
                    <tr>
                        <td class="title">2</td>
                        <td>*pData</td>
                        <td>(NULLを除いた任意の値)</td>
                        <td>取り出したデータの格納先ポインタ</td>
                    </tr>
                    <tr>
                        <td class="title">3</td>
                        <td>size</td>
                        <td>(任意の値)</td>
                        <td>取り出すデータのサイズ</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
            <div>
                <h1><a name="func-writebuffer-check">グローバル関数 - BufferCheckWrite()</a></h1>
                <table>
                    <tr>
                        <td class="title">関数</td>
                        <td colspan="4">BufferCheckWrite()</td>
                    </tr>
                    <tr>
                        <td class="title">概要</td>
                        <td colspan="4">書込み用バッファデータ有無判定</td>
                    </tr>
                    <tr>
                        <td class="title">説明</td>
                        <td colspan="4">
                            引数idに対応する書込み用バッファにデータがあるか判定する。
                        </td>
                    </tr>
                    <tr>
                        <td class="title">宣言</td>
                        <td colspan="4">
                            <code>
                                <pre>#include &lt;Buffer.h&gt;</pre>
                                <br>
                                <pre>extern bool BufferCheckWrite( MttyDevId_t id );</pre>
                            </code>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="3">戻り値</td>
                        <td class="title" colspan="2">値</td>
                        <td class="title" colspan="2">説明</td>
                    </tr>
                    <tr>
                        <td colspan="2">true</td>
                        <td colspan="2">データ有り</td>
                    </tr>
                    <tr>
                        <td colspan="2">false</td>
                        <td colspan="2">データ無し</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="3">引数</td>
                        <td class="title">#</td>
                        <td class="title">引数名</td>
                        <td class="title">値</td>
                        <td class="title">説明</td>
                    </tr>
                    <tr>
                        <td class="title" rowspan="2">1</td>
                        <td rowspan="2">id</td>
                        <td>MTTY_DEVID_SERIAL1</td>
                        <td>/serial1</td>
                    </td>
                    <tr>
                        <td>MTTY_DEVID_SERIAL2</td>
                        <td>/serial2</td>
                    </tr>
                </table>
            </div>
            <div class="totop"><a href="#top">▲上へ</a></div>
        </div>
        <div id="footer">
            <div id="copyright">
                Copyright &copy 2020 Mochi. All rights reserved.
            </div>
        </div>
    </body>
</html>
