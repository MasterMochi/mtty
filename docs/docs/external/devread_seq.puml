@startuml

participant drv as "drv-ns16550"
participant mtty
participant user

activate mtty

loop
    mtty -> mtty: LibmvfsSelect()
    deactivate mtty

    activate drv
    rnote over drv #FFFFFF: データ受信
    drv ->> mtty: VfsReady
    deactivate drv
    activate mtty

    drv <<- mtty: LibmvfsRead()
    activate drv

    drv -->> mtty:
    deactivate drv

    mtty -> mtty: 読込バッファにデータ追加

    ref over mtty: エコー機能
end
deactivate mtty

@enduml
